# 課題１（質問）

## 脆弱性について

### XSS

1. 仕組み：悪意あるスクリプトをブラウザ上で埋め込む
2. 発生し得る被害：オリジンが同じスクリプトとして動作し SOP の制約を受けないので、アクセス制御の回避、機密情報漏洩、なりすましのリスクがある
3. 対処法：外部からの入力はすべてエスケープするなど、危険なものとして扱う

### コマンドインジェクション

1. 仕組み：アプリケーションを通じてサーバー上にコマンドを実行する
2. 発生し得る被害：サーバーを制御できれば何でもできてしまう
3. 対処法：OS コマンドを呼び出さない実装にする。OS コマンドが必要な場合は、厳格なホワイトリスト方式のバリデーションが必須（サニイジングでは迂回される可能性が高い）

### SQL インジェクション

1. 仕組み：悪意ある入力で意図しない SQL を実行する
2. 発生し得る被害：DB からの個人情報漏洩、データ改竄など
3. 対処法：入力値のエスケープ処理よりもバインド機構 (あらかじめ組み立てた文にパラメータを埋め込む方法) が推奨されている

### CSRF

1. 仕組み：主にクッキーなどユーザーの識別情報を悪用してなりすましを行い、サーバーに不正なリクエストを送信する
2. 発生し得る被害：不正書き込み、意図しないサーバーの設定変更など
3. 対処法：`Same-Site:Strict`を指定してクロスサイトからのリクエストにクッキーを送信しない、CSRF トークンの埋め込みなど

## API が受け取ったリクエストの body の値をそのまま正規表現チェックする問題点

- サーバーに多大な負荷を与える可能性がある
- 対策
  - 独自の正規表現を使用しない
  - \*や+など，繰り返し表現はなるべく使わない
  - 入力文字数を制限する
  - ライブラリを最新にする
  - タイムアウトを設定する

[ReDoS から学ぶ，正規表現の脆弱性について](https://qiita.com/flat-field/items/f5b0c803ba0b7030d97a)
